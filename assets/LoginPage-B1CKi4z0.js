import{Q as f}from"./uid-BrPC7ZYM.js";import{Q as v}from"./QInput-CsRd1fYR.js";import{a as h,u as q,r as l,c as Q,o as y,e as a,w as o,f as V,g as _,h as g,i as k,j as S,k as B,l as C,Q as P,m as N,n as R,t as j}from"./index--h6_vfO-.js";import{Q as A}from"./QBanner-DJkCgzjS.js";import{Q as D}from"./QForm-DBtyPbqv.js";import{Q as E}from"./QCard-DMtk_vtU.js";const I={class:"row items-center justify-center q-pa-md bg-grey-2",style:{"min-height":"100vh"}},z=h({__name:"LoginPage",setup(K){const b=q(),w=V(),x=_(),u=l(""),d=l(""),t=l(!1),r=l(""),i=l(!1),m=l(null),c={required:s=>!!s||"This field is required",email:s=>!!s&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||"Please enter a valid email"};async function p(){if(r.value="",!(!m.value||!await m.value.validate())){t.value=!0;try{await b.login(u.value.trim(),d.value);const e=x.query.next||"/";w.replace(e)}catch(e){r.value=e?.response?.data?.error||e?.message||"Login failed. Please check your credentials."}finally{t.value=!1}}}return(s,e)=>(y(),Q("div",I,[a(E,{class:"q-pa-lg shadow-4",style:{width:"380px","max-width":"95vw"}},{default:o(()=>[a(f,{class:"text-center q-pb-none"},{default:o(()=>[...e[3]||(e[3]=[g("div",{class:"text-h6 text-weight-bold"},"Admin Dashboard",-1),g("div",{class:"text-caption text-grey-7 q-mt-xs"}," Sign in to manage your content ",-1)])]),_:1}),a(D,{ref_key:"formRef",ref:m,onSubmit:k(p,["prevent"]),class:"q-mt-md q-gutter-md"},{default:o(()=>[a(f,{class:"q-gutter-sm"},{default:o(()=>[a(v,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),type:"email",label:"Email",dense:"",outlined:"",autofocus:"",autocomplete:"email",disable:t.value,rules:[c.required,c.email]},null,8,["modelValue","disable","rules"]),a(v,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=n=>d.value=n),type:i.value?"text":"password",label:"Password",dense:"",outlined:"",autocomplete:"current-password",disable:t.value,rules:[c.required],onKeyup:C(p,["enter"])},{append:o(()=>[a(P,{name:i.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=n=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","disable","rules"]),a(N,{label:"Sign in",color:"primary",class:"full-width q-mt-sm",type:"submit",loading:t.value,disable:t.value,unelevated:""},null,8,["loading","disable"]),r.value?(y(),S(A,{key:0,class:"bg-red-2 text-red-9 q-mt-sm",dense:""},{default:o(()=>[R(j(r.value),1)]),_:1})):B("",!0)]),_:1})]),_:1},512)]),_:1})]))}});export{z as default};
